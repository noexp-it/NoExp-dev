@using NoExp.Application.Interfaces
@using NoExp.Domain.Entities
@using NoExp.Domain.Enums.JobAd
@inject IJobAdService JobAdService
@inject NavigationManager NavigationManager

@rendermode InteractiveServer

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudGrid Spacing="3">
        <!-- Left Sidebar - Filters -->
        <MudItem xs="12" md="3">
            <MudPaper Class="pa-4" Elevation="2" Style="position: sticky; top: 80px;">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.FilterList" Class="me-2"/>
                    Filters
                </MudText>

                <!-- Search -->
                <MudTextField @bind-Value="searchText"
                              Label="Search"
                              Placeholder="Job title, keyword..."
                              Adornment="Adornment.Start"
                              AdornmentIcon="@Icons.Material.Filled.Search"
                              Variant="Variant.Outlined"
                              Margin="Margin.Dense"
                              Immediate="true"
                              OnDebounceIntervalElapsed="ApplyFilters"
                              DebounceInterval="300"
                              Class="mb-4"/>

                <!-- Location -->
                <MudTextField @bind-Value="locationFilter"
                              Label="Location"
                              Placeholder="City, country..."
                              Adornment="Adornment.Start"
                              AdornmentIcon="@Icons.Material.Filled.LocationOn"
                              Variant="Variant.Outlined"
                              Margin="Margin.Dense"
                              Immediate="true"
                              OnDebounceIntervalElapsed="ApplyFilters"
                              DebounceInterval="300"
                              Class="mb-4"/>

                <MudDivider Class="mb-3"/>

                <!-- Work Type Section -->
                <MudText Typo="Typo.subtitle2" Class="mb-2 fw-bold">Work Type</MudText>
                <MudStack Spacing="1" Class="mb-3">
                    @foreach (var type in Enum.GetValues(typeof(WorkType)).Cast<WorkType>())
                    {
                        <MudCheckBox T="bool" 
                                     Checked="@IsWorkTypeSelected(type)"
                                     CheckedChanged="@((bool isChecked) => ToggleWorkTypeCheckbox(type, isChecked))"
                                     Label="@FormatWorkType(type)"
                                     Color="@GetWorkTypeColorForCheckbox(type)"
                                     Dense="true"
                                     Size="Size.Small"/>
                    }
                </MudStack>

                <MudDivider Class="mb-3"/>

                <!-- Work Mode Section -->
                <MudText Typo="Typo.subtitle2" Class="mb-2 fw-bold">Work Mode</MudText>
                <MudStack Spacing="1" Class="mb-3">
                    @foreach (var mode in Enum.GetValues(typeof(WorkMode)).Cast<WorkMode>())
                    {
                        <MudCheckBox T="bool" 
                                     Checked="@IsWorkModeSelected(mode)"
                                     CheckedChanged="@((bool isChecked) => ToggleWorkModeCheckbox(mode, isChecked))"
                                     Label="@mode.ToString()"
                                     Color="Color.Success"
                                     Dense="true"
                                     Size="Size.Small"/>
                    }
                </MudStack>

                <MudDivider Class="mb-3"/>

                <!-- Salary Range -->
                <MudText Typo="Typo.subtitle2" Class="mb-2 fw-bold">Salary Range</MudText>
                <MudNumericField @bind-Value="minSalary"
                                 Label="Min"
                                 Variant="Variant.Outlined"
                                 Margin="Margin.Dense"
                                 Min="0"
                                 Adornment="Adornment.Start"
                                 AdornmentIcon="@Icons.Material.Filled.AttachMoney"
                                 Class="mb-2"/>
                <MudNumericField @bind-Value="maxSalary"
                                 Label="Max"
                                 Variant="Variant.Outlined"
                                 Margin="Margin.Dense"
                                 Min="0"
                                 Adornment="Adornment.Start"
                                 AdornmentIcon="@Icons.Material.Filled.AttachMoney"
                                 Class="mb-3"/>

                <MudDivider Class="mb-3"/>

                <!-- Action Buttons -->
                <MudStack Spacing="2">
                    <MudButton Variant="Variant.Filled"
                               Color="Color.Primary"
                               FullWidth="true"
                               StartIcon="@Icons.Material.Filled.Search"
                               OnClick="ApplyFilters">
                        Apply Filters
                    </MudButton>
                    <MudButton Variant="Variant.Outlined"
                               Color="Color.Secondary"
                               FullWidth="true"
                               StartIcon="@Icons.Material.Filled.Clear"
                               OnClick="ClearFilters">
                        Clear All
                    </MudButton>
                </MudStack>

                <!-- Active Filters Summary -->
                @if (GetActiveFilterCount() > 0)
                {
                    <MudAlert Severity="Severity.Info" Dense="true" Class="mt-3">
                        <strong>@GetActiveFilterCount()</strong> filter(s) active
                    </MudAlert>
                }
            </MudPaper>
        </MudItem>

        <!-- Right Content - Job Listings -->
        <MudItem xs="12" md="9">
            <!-- Top Bar with Results and Sorting -->
            <MudPaper Class="pa-3 mb-3 d-flex justify-content-between align-items-center" Elevation="1">
                <MudText Typo="Typo.body1">
                    <strong>@filteredJobAds.Count</strong> jobs found
                </MudText>
                <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
                    <MudSelect T="int" @bind-Value="itemsPerPage" Label="Per page" Variant="Variant.Outlined" Margin="Margin.Dense" Dense="true" Style="min-width: 100px;">
                        <MudSelectItem Value="5">5</MudSelectItem>
                        <MudSelectItem Value="10">10</MudSelectItem>
                        <MudSelectItem Value="15">15</MudSelectItem>
                        <MudSelectItem Value="20">20</MudSelectItem>
                        <MudSelectItem Value="50">50</MudSelectItem>
                    </MudSelect>
                </MudStack>
            </MudPaper>

            <!-- Job Ads List -->
            @if (isLoading)
            {
                <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-4"/>
            }
            else if (!filteredJobAds.Any())
            {
                <MudPaper Class="pa-8 text-center" Elevation="0">
                    <MudIcon Icon="@Icons.Material.Filled.SearchOff" Size="Size.Large" Color="Color.Secondary"/>
                    <MudText Typo="Typo.h6" Class="mt-4">No job ads found</MudText>
                    <MudText Typo="Typo.body2" Color="Color.Secondary">Try adjusting your filters or search criteria</MudText>
                </MudPaper>
            }
            else
            {
                <!-- Paginated Results Info -->
                <MudText Typo="Typo.body2" Color="Color.Secondary" Class="mb-3">
                    Showing @GetStartIndex() - @GetEndIndex() of @filteredJobAds.Count results
                </MudText>

                @foreach (var jobAd in pagedJobAds)
                {
                    <MudCard Class="@GetJobCardClass(jobAd)" Elevation="2" Style="cursor: pointer; transition: all 0.3s; position: relative;" @onclick="@(() => NavigateToJobDetails(jobAd.Id))">
                        @* Special Badge for Practice/Internship *@
                        @if (jobAd.WorkType == WorkType.Practice || jobAd.WorkType == WorkType.Internship)
                        {
                            <div class="entry-level-badge">
                                <MudIcon Icon="@Icons.Material.Filled.Spa" Size="Size.Small" Class="me-1"/>
                                @jobAd.WorkType
                            </div>
                        }
                        
                        @* Favorite Button *@
                        <div class="favorite-button" @onclick:stopPropagation="true">
                            <MudIconButton Icon="@Icons.Material.Filled.FavoriteBorder" 
                                           Color="Color.Default" 
                                           Size="Size.Small"
                                           OnClick="@(() => ToggleFavorite(jobAd.Id))"
                                           Title="Save to favorites"/>
                        </div>
                        
                        <MudCardContent Class="py-3">
                            <MudGrid>
                                <MudItem xs="12" sm="2" Class="d-flex align-items-center justify-content-center">
                                    <MudAvatar Size="Size.Medium" Color="@GetAvatarColor(jobAd)">
                                        <MudIcon Icon="@GetAvatarIcon(jobAd)" Size="Size.Medium"/>
                                    </MudAvatar>
                                </MudItem>
                                <MudItem xs="12" sm="10">
                                    <MudStack Spacing="1">
                                        <MudText Typo="Typo.subtitle1" Class="fw-bold">@jobAd.Title</MudText>

                                        <MudStack Row="true" Spacing="1" AlignItems="AlignItems.Center" Class="flex-wrap">
                                            <MudChip T="string" Size="Size.Small" Icon="@Icons.Material.Filled.LocationOn">
                                                @jobAd.Location
                                            </MudChip>
                                            <MudChip T="string" Size="Size.Small" Icon="@Icons.Material.Filled.Work" Color="@GetWorkTypeChipColor(jobAd)">
                                                @jobAd.WorkType
                                            </MudChip>
                                            <MudChip T="string" Size="Size.Small" Icon="@Icons.Material.Filled.HomeWork" Color="Color.Success">
                                                @jobAd.WorkMode
                                            </MudChip>
                                            @if (jobAd.SalaryMin.HasValue && jobAd.SalaryMax.HasValue)
                                            {
                                                <MudChip T="string" Size="Size.Small" Icon="@Icons.Material.Filled.AttachMoney" Color="Color.Warning">
                                                    @($"{jobAd.SalaryMin:N0} - {jobAd.SalaryMax:N0}")
                                                </MudChip>
                                            }
                                        </MudStack>

                                        <MudText Typo="Typo.body2" Color="Color.Secondary" Class="text-truncate-2">
                                            @((MarkupString)TruncateHtml(jobAd.Description, 150))
                                        </MudText>

                                        @if (jobAd.TechStack.Any())
                                        {
                                            <MudStack Row="true" Spacing="1" Class="flex-wrap mt-1">
                                                @foreach (var skill in jobAd.TechStack.Take(4))
                                                {
                                                    <MudChip T="string" Size="Size.Small" Variant="Variant.Outlined" Color="Color.Primary">
                                                        @skill
                                                    </MudChip>
                                                }
                                                @if (jobAd.TechStack.Count > 4)
                                                {
                                                    <MudChip T="string" Size="Size.Small" Variant="Variant.Text">
                                                        +@(jobAd.TechStack.Count - 4) more
                                                    </MudChip>
                                                }
                                            </MudStack>
                                        }
                                    </MudStack>
                                </MudItem>
                            </MudGrid>
                        </MudCardContent>
                    </MudCard>
                }

                <!-- Pagination Controls -->
                <MudPaper Class="d-flex justify-content-center align-items-center pa-4 mt-4" Elevation="0">
                    <MudPagination 
                        Count="@totalPages" 
                        Selected="@currentPage" 
                        SelectedChanged="OnPageChanged"
                        ShowFirstButton="true"
                        ShowLastButton="true"
                        ShowPreviousButton="true"
                        ShowNextButton="true"
                        BoundaryCount="1"
                        MiddleCount="3"
                        Color="Color.Primary"
                        Size="Size.Large"/>
                </MudPaper>
            }
        </MudItem>
    </MudGrid>
</MudContainer>

<style>
    .text-truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* Filter Badge Container */
    .filter-badges-container {
        display: flex;
        gap: 12px;
        overflow-x: auto;
        padding: 8px 0;
        scrollbar-width: thin;
    }

    .filter-badges-container::-webkit-scrollbar {
        height: 6px;
    }

    .filter-badges-container::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 3px;
    }

    /* Filter Badge Style */
    .filter-badge {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-width: 80px;
        padding: 12px 8px 8px 8px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        background-color: #f5f5f5;
    }

    .filter-badge:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .filter-badge.selected {
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        transform: translateY(-2px);
    }

    /* Badge Icon */
    .badge-icon {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 6px;
        background: rgba(255, 255, 255, 0.3);
    }

    .filter-badge.selected .badge-icon {
        background: rgba(255, 255, 255, 0.4);
    }

    /* Badge Label */
    .badge-label {
        font-size: 0.75rem;
        font-weight: 500;
        text-align: center;
        line-height: 1.2;
    }

    .filter-badge.selected .badge-label {
        color: white;
        font-weight: 600;
    }

    /* Badge Count/Checkmark */
    .badge-count {
        position: absolute;
        top: 4px;
        right: 4px;
        background: white;
        color: #4CAF50;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }

    /* Entry-Level Job Card Background */
    .practice-card,
    .internship-card {
        background: linear-gradient(135deg, #e8f5e9 0%, #ffffff 100%) !important;
        border-left: 4px solid #4CAF50 !important;
    }

    /* Entry-Level Badge Style */
    .entry-level-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        padding: 4px 10px;
        border-radius: 16px;
        font-weight: 500;
        font-size: 0.7rem;
        display: flex;
        align-items: center;
        z-index: 2;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
        color: white;
    }

    /* Favorite Button Styles */
    .favorite-button {
        position: absolute;
        top: 8px;
        left: 8px;
        z-index: 2;
        opacity: 0.7;
        transition: opacity 0.2s ease;
    }

    .favorite-button:hover {
        opacity: 1;
    }

    .favorite-button button {
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        padding: 4px;
    }

    .favorite-button button:hover {
        background-color: rgba(255, 255, 255, 1);
        transform: scale(1.1);
    }

    /* Hover effect for entry-level cards */
    .practice-card:hover,
    .internship-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.15) !important;
    }

    /* Show favorite button more prominently on card hover */
    .mud-card:hover .favorite-button {
        opacity: 1;
    }
</style>

@code {
    private List<JobAd> jobAds = new();
    private List<JobAd> filteredJobAds = new();
    private List<JobAd> pagedJobAds = new();
    private bool isLoading = true;

    // Filter parameters
    private string searchText = string.Empty;
    private string locationFilter = string.Empty;
    private IEnumerable<WorkType> workTypeFilters = new HashSet<WorkType>();
    private IEnumerable<WorkMode> workModeFilters = new HashSet<WorkMode>();
    private decimal? minSalary;
    private decimal? maxSalary;

    // Pagination parameters
    private int currentPage = 1;
    private int itemsPerPage = 10;
    private int totalPages => (int)Math.Ceiling((double)filteredJobAds.Count / itemsPerPage);

    protected override async Task OnInitializedAsync()
    {
        await LoadJobAdsAsync();
    }

    private async Task LoadJobAdsAsync()
    {
        isLoading = true;
        jobAds = await JobAdService.GetAllJobAdsAsync();
        ApplyFilters();
        isLoading = false;
    }

    private void ApplyFilters()
    {
        filteredJobAds = jobAds.Where(job =>
        {
            // Search filter (title, description, tech stack)
            if (!string.IsNullOrWhiteSpace(searchText))
            {
                var search = searchText.ToLower();
                var matchesTitle = job.Title.ToLower().Contains(search);
                var matchesDescription = job.Description.ToLower().Contains(search);
                var matchesTechStack = job.TechStack.Any(tech => tech.ToLower().Contains(search));

                if (!matchesTitle && !matchesDescription && !matchesTechStack)
                    return false;
            }

            // Location filter
            if (!string.IsNullOrWhiteSpace(locationFilter) &&
                !job.Location.Contains(locationFilter, StringComparison.OrdinalIgnoreCase))
                return false;

            // Work Type multi-select filter
            if (workTypeFilters.Any() && !workTypeFilters.Contains(job.WorkType))
                return false;

            // Work Mode multi-select filter
            if (workModeFilters.Any() && !workModeFilters.Contains(job.WorkMode))
                return false;

            // Salary range filter
            if (minSalary.HasValue && job.SalaryMax < minSalary.Value)
                return false;

            if (maxSalary.HasValue && job.SalaryMin > maxSalary.Value)
                return false;

            return true;
        }).ToList();

        // Reset to first page when filters change
        currentPage = 1;
        UpdatePagedJobAds();
    }

    private void ClearFilters()
    {
        searchText = string.Empty;
        locationFilter = string.Empty;
        workTypeFilters = new HashSet<WorkType>();
        workModeFilters = new HashSet<WorkMode>();
        minSalary = null;
        maxSalary = null;
        currentPage = 1;

        ApplyFilters();
    }

    private void OnPageChanged(int page)
    {
        currentPage = page;
        UpdatePagedJobAds();
        
        // Optional: Scroll to top when page changes
        StateHasChanged();
    }

    private void UpdatePagedJobAds()
    {
        var skip = (currentPage - 1) * itemsPerPage;
        pagedJobAds = filteredJobAds
            .Skip(skip)
            .Take(itemsPerPage)
            .ToList();

        StateHasChanged();
    }

    private int GetStartIndex()
    {
        if (!filteredJobAds.Any()) return 0;
        return ((currentPage - 1) * itemsPerPage) + 1;
    }

    private int GetEndIndex()
    {
        if (!filteredJobAds.Any()) return 0;
        var end = currentPage * itemsPerPage;
        return Math.Min(end, filteredJobAds.Count);
    }

    private string TruncateHtml(string html, int maxLength)
    {
        if (string.IsNullOrEmpty(html))
            return string.Empty;

        // Remove HTML tags for truncation
        var plainText = System.Text.RegularExpressions.Regex.Replace(html, "<.*?>", string.Empty);

        if (plainText.Length <= maxLength)
            return html;

        return plainText.Substring(0, maxLength) + "...";
    }

    // Get CSS class based on job type
    private string GetJobCardClass(JobAd jobAd)
    {
        return jobAd.WorkType switch
        {
            WorkType.Practice => "mb-3 practice-card",
            WorkType.Internship => "mb-3 internship-card",
            _ => "mb-3"
        };
    }

    // Get avatar color based on job type
    private Color GetAvatarColor(JobAd jobAd)
    {
        return jobAd.WorkType switch
        {
            WorkType.Practice => Color.Success,
            WorkType.Internship => Color.Success,
            _ => Color.Primary
        };
    }

    // Get avatar icon based on job type
    private string GetAvatarIcon(JobAd jobAd)
    {
        return jobAd.WorkType switch
        {
            WorkType.Practice => Icons.Material.Filled.Park,
            WorkType.Internship => Icons.Material.Filled.Park,
            _ => Icons.Material.Filled.Business
        };
    }

    // Get chip color for work type
    private Color GetWorkTypeChipColor(JobAd jobAd)
    {
        return jobAd.WorkType switch
        {
            WorkType.Practice => Color.Success,
            WorkType.Internship => Color.Success,
            _ => Color.Default
        };
    }

    // Get badge background color
    private string GetBadgeBackgroundColor(WorkType workType, bool isSelected)
    {
        if (!isSelected) return "#f5f5f5";
        
        return workType switch
        {
            WorkType.Practice => "#4CAF50",
            WorkType.Internship => "#4CAF50",
            WorkType.FullTime => "#2196F3",
            WorkType.PartTime => "#03A9F4",
            WorkType.Contract => "#FF9800",
            WorkType.Temporary => "#9C27B0",
            WorkType.Freelance => "#00BCD4",
            _ => "#2196F3"
        };
    }

    // Get work type icon
    private string GetWorkTypeIcon(WorkType workType)
    {
        return workType switch
        {
            WorkType.Practice => Icons.Material.Filled.School,
            WorkType.Internship => Icons.Material.Filled.School,
            WorkType.FullTime => Icons.Material.Filled.WorkHistory,
            WorkType.PartTime => Icons.Material.Filled.AccessTime,
            WorkType.Contract => Icons.Material.Filled.Description,
            WorkType.Temporary => Icons.Material.Filled.DateRange,
            WorkType.Freelance => Icons.Material.Filled.Person,
            _ => Icons.Material.Filled.Work
        };
    }

    // Get work mode icon
    private string GetWorkModeIcon(WorkMode workMode)
    {
        return workMode switch
        {
            WorkMode.Remote => Icons.Material.Filled.Home,
            WorkMode.Onsite => Icons.Material.Filled.Business,
            WorkMode.Hybrid => Icons.Material.Filled.Autorenew,
            _ => Icons.Material.Filled.HomeWork
        };
    }

    // Format work type name
    private string FormatWorkType(WorkType workType)
    {
        return workType switch
        {
            WorkType.FullTime => "Full-Time",
            WorkType.PartTime => "Part-Time",
            _ => workType.ToString()
        };
    }

    // Check if work type is selected
    private bool IsWorkTypeSelected(WorkType workType)
    {
        return workTypeFilters.Contains(workType);
    }

    // Check if work mode is selected
    private bool IsWorkModeSelected(WorkMode workMode)
    {
        return workModeFilters.Contains(workMode);
    }

    // Toggle work type checkbox
    private void ToggleWorkTypeCheckbox(WorkType workType, bool isChecked)
    {
        var filterList = workTypeFilters.ToList();
        if (isChecked)
        {
            if (!filterList.Contains(workType))
            {
                filterList.Add(workType);
            }
        }
        else
        {
            filterList.Remove(workType);
        }
        workTypeFilters = filterList;
        ApplyFilters();
    }

    // Toggle work mode checkbox
    private void ToggleWorkModeCheckbox(WorkMode workMode, bool isChecked)
    {
        var filterList = workModeFilters.ToList();
        if (isChecked)
        {
            if (!filterList.Contains(workMode))
            {
                filterList.Add(workMode);
            }
        }
        else
        {
            filterList.Remove(workMode);
        }
        workModeFilters = filterList;
        ApplyFilters();
    }

    // Get work type color for checkbox
    private Color GetWorkTypeColorForCheckbox(WorkType workType)
    {
        return workType switch
        {
            WorkType.Practice => Color.Success,
            WorkType.Internship => Color.Success,
            WorkType.FullTime => Color.Primary,
            WorkType.PartTime => Color.Info,
            WorkType.Contract => Color.Warning,
            WorkType.Temporary => Color.Secondary,
            WorkType.Freelance => Color.Tertiary,
            _ => Color.Primary
        };
    }

    // Get active filter count
    private int GetActiveFilterCount()
    {
        int count = 0;
        if (!string.IsNullOrWhiteSpace(searchText)) count++;
        if (!string.IsNullOrWhiteSpace(locationFilter)) count++;
        if (workTypeFilters.Any()) count += workTypeFilters.Count();
        if (workModeFilters.Any()) count += workModeFilters.Count();
        if (minSalary.HasValue) count++;
        if (maxSalary.HasValue) count++;
        return count;
    }

    // Toggle work type filter
    private void ToggleWorkType(WorkType workType)
    {
        var filterList = workTypeFilters.ToList();
        if (filterList.Contains(workType))
        {
            filterList.Remove(workType);
        }
        else
        {
            filterList.Add(workType);
        }
        workTypeFilters = filterList;
        ApplyFilters();
    }

    // Toggle work mode filter
    private void ToggleWorkMode(WorkMode workMode)
    {
        var filterList = workModeFilters.ToList();
        if (filterList.Contains(workMode))
        {
            filterList.Remove(workMode);
        }
        else
        {
            filterList.Add(workMode);
        }
        workModeFilters = filterList;
        ApplyFilters();
    }

    // Handle favorite toggle
    private void ToggleFavorite(Guid jobAdId)
    {
        // TODO: Implement favorite functionality
        // This will save/remove the job from user's favorites
        Console.WriteLine($"Favorite toggled for job: {jobAdId}");
    }

    // Navigate to job details
    private void NavigateToJobDetails(Guid jobAdId)
    {
        NavigationManager.NavigateTo($"/JobAds/Details/{jobAdId}");
    }
}